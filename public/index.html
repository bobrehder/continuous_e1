<!DOCTYPE html>
<html>
  <head>
    <title>Experiment</title>
    <script src="https://unpkg.com/jspsych@7.3.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-canvas-keyboard-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-canvas-slider-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.1.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-select"></script>
 	<link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css" />
 	<link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.2.2/css/survey.css">
 	<style>
      h1   {font-weight: bold; font-size: 20px;}
      p    {text-align:  left;}
    </style>
	<script type="text/javascript">
	  const jsPsych = initJsPsych({
	    experiment_width: 800,
	    on_finish: function() { 
	      $ajax({
	        type: "POST",
	        url: "/experiment-data"},
	        data JSON. stringify(jsPsych.data.get().values())),
	        contentType: "application/json"
	      })
	      .done(function () {
	        alert ("Your data has been saved.")
	      })
	      .fail(function () {
	        alert ("You data has not been saved.")
	      })

	      jsPsych.data.displayData()
	      //saveData(jsPsych.data.get().csv())
	    }
	  })
	</script>
  </head>
  <body>
    <script type = "module">
      import { create_timeline } from './modules/experiment.js'
      var timeline = []

      create_timeline (timeline)
      jsPsych.run(timeline)
    </script>
  </body>
</html>
